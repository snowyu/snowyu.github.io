<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <link rel="mask-icon" href="/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://riceball.me').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":true,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":"utteranc","storage":true,"nav":{"disqusjs":{"text":"Disqus","order":-1},"utteranc":{"order":-2}}},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="ğŸŒŸ ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶ ğŸš€ ä¸ºä»€ä¹ˆä»å¤´æ‰‹æ“ AI æ¡†æ¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æœ‰æ¡†æ¶ï¼Ÿ ğŸ’¡ ä¸ºå•¥æˆ‘è¦ä»å¤´æ‰‹æ“AIæ¡†æ¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ç±»ä¼¼ langchainã€AutoGenã€LMQL ç­‰ç°æˆæ¡†æ¶å‘¢ï¼Ÿ æœ€åˆæˆ‘ä¹Ÿå°è¯•äº†å¤šä¸ªæ¡†æ¶ï¼ˆåŒ…æ‹¬LangChainã€AutoGenã€LMQLã€Outlinesã€MemGPTç­‰ï¼‰ï¼Œä½†å®ƒä»¬éƒ½æ— æ³•å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚æˆ‘æƒ³è¦çš„æ˜¯ä¸€ä¸ªæåº¦çµæ´»å¯é…ç½®çš„AIåº”ç”¨æ¡†æ¶ï¼Œç”¨æ¥æ‰“é€ æˆ‘è®¾">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶">
<meta property="og:url" content="https:&#x2F;&#x2F;riceball.me&#x2F;article&#x2F;Build-an-application-oriented-AI-framework-from-scratch&#x2F;index.html">
<meta property="og:site_name" content="Riceball LEE">
<meta property="og:description" content="ğŸŒŸ ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶ ğŸš€ ä¸ºä»€ä¹ˆä»å¤´æ‰‹æ“ AI æ¡†æ¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æœ‰æ¡†æ¶ï¼Ÿ ğŸ’¡ ä¸ºå•¥æˆ‘è¦ä»å¤´æ‰‹æ“AIæ¡†æ¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ç±»ä¼¼ langchainã€AutoGenã€LMQL ç­‰ç°æˆæ¡†æ¶å‘¢ï¼Ÿ æœ€åˆæˆ‘ä¹Ÿå°è¯•äº†å¤šä¸ªæ¡†æ¶ï¼ˆåŒ…æ‹¬LangChainã€AutoGenã€LMQLã€Outlinesã€MemGPTç­‰ï¼‰ï¼Œä½†å®ƒä»¬éƒ½æ— æ³•å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚æˆ‘æƒ³è¦çš„æ˜¯ä¸€ä¸ªæåº¦çµæ´»å¯é…ç½®çš„AIåº”ç”¨æ¡†æ¶ï¼Œç”¨æ¥æ‰“é€ æˆ‘è®¾">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-03-17T17:14:40.000Z">
<meta property="article:modified_time" content="2025-04-05T16:43:02.000Z">
<meta property="article:author" content="Riceball LEE">
<meta property="article:tag" content="learning">
<meta property="article:tag" content="ai">
<meta property="article:tag" content="deep learning">
<meta property="article:tag" content="framework">
<meta property="article:tag" content="AI language">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://riceball.me/article/Build-an-application-oriented-AI-framework-from-scratch/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=MML_CHTML" ></script>
<link rel='stylesheet' href='//cdn.jsdelivr.net/npm/highlight.js@9/styles/github.css'>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
<link rel="pgpkey" type="application/pgp-keys" href="/key.pub">
<link href="https://github.com/snowyu" rel="me">




  <title>ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶ | Riceball LEE</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-75922641-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-75922641-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?83c12d4163f9258ceafd22c997abddc2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Riceball LEE" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Riceball LEE</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <h1 class="site-subtitle" itemprop="description">Go with wind.</h1>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-fw fa-sitemap"></i>ç«™ç‚¹åœ°å›¾</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="fa fa-fw fa-heartbeat"></i>å…¬ç›Š 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/snowyu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://riceball.me/article/Build-an-application-oriented-AI-framework-from-scratch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://www.gravatar.com/avatar/f7b81e783188e376c9f046ae1285d47f">
      <meta itemprop="name" content="Riceball LEE">
      <meta itemprop="description" content="Go with wind.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Riceball LEE">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2025-03-18 01:14:40" itemprop="dateCreated datePublished" datetime="2025-03-18T01:14:40+08:00">2025-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-04-06 00:43:02" itemprop="dateModified" datetime="2025-04-06T00:43:02+08:00">2025-04-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index">
                    <span itemprop="name">AI</span>
                  </a>
                </span>
            </span>

          
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-copyright"></i>
    </span>
    <span class="post-meta-item-text">åˆè‘—è€…ï¼š</span><a href="https://riceball.me"><span>Riceball LEE</span></a>
  </span>
  <br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>8.3k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>15 åˆ†é’Ÿ</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="cong-tou-shou-cuo-mian-xiang-ying-yong-de-ai-kuang-jia" class="heading-control">ğŸŒŸ ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶ ğŸš€<a class="heading-anchor" href="#cong-tou-shou-cuo-mian-xiang-ying-yong-de-ai-kuang-jia" aria-hidden="true"></a></h1>
<h2 id="wei-shi-mo-cong-tou-shou-cuo-ai-kuang-jia-er-bu-shi-shi-yong-xian-you-kuang-jia" class="heading-control">ä¸ºä»€ä¹ˆä»å¤´æ‰‹æ“ AI æ¡†æ¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æœ‰æ¡†æ¶ï¼Ÿ<a class="heading-anchor" href="#wei-shi-mo-cong-tou-shou-cuo-ai-kuang-jia-er-bu-shi-shi-yong-xian-you-kuang-jia" aria-hidden="true"></a></h2>
<p>ğŸ’¡ ä¸ºå•¥æˆ‘è¦ä»å¤´æ‰‹æ“AIæ¡†æ¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ç±»ä¼¼ langchainã€AutoGenã€LMQL ç­‰ç°æˆæ¡†æ¶å‘¢ï¼Ÿ</p>
<p>æœ€åˆæˆ‘ä¹Ÿå°è¯•äº†å¤šä¸ªæ¡†æ¶ï¼ˆåŒ…æ‹¬LangChainã€AutoGenã€LMQLã€Outlinesã€MemGPTç­‰ï¼‰ï¼Œä½†å®ƒä»¬éƒ½æ— æ³•å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚æˆ‘æƒ³è¦çš„æ˜¯ä¸€ä¸ª<strong>æåº¦çµæ´»å¯é…ç½®çš„AIåº”ç”¨æ¡†æ¶</strong>ï¼Œç”¨æ¥æ‰“é€ æˆ‘è®¾æƒ³çš„<code>ã€ŒçœŸÂ·AI PCã€</code>â€”â€”è€Œéå½“å‰å¤§å¤šæ•°AIäº§å“é‚£ç§â€œè¿œç¨‹AIæœåŠ¡+æœ¬åœ°ç©ºå£³â€çš„æ¨¡å¼ã€‚</p>
<p>åœ¨å½“å‰é˜¶æ®µï¼Œæˆ‘è®¤ä¸ºé¢å‘åº”ç”¨çš„AIæ¡†æ¶åº”èšç„¦äº<strong>æç¤ºè¯ï¼ˆPromptï¼‰çš„å·¥ç¨‹åŒ–</strong>â€”â€”è¿™æ˜¯äººç±»ä¸AIäº¤äº’çš„å”¯ä¸€æ¡¥æ¢ã€‚æˆ‘çš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<br>
âœ… å°†æç¤ºè¯è½¬åŒ–ä¸ºå¯ç¼–ç¨‹çš„â€œå‡½æ•°â€æˆ–â€œç±»â€ï¼Œæ”¯æŒè‡ªç”±ç»„åˆã€ç‹¬ç«‹è°ƒç”¨ï¼Œå¹¶èƒ½æŒç»­è¿­ä»£ä¼˜åŒ–ã€‚</p>
<p>ä½†æ˜¯langchainå¯¹æç¤ºè¯çš„æŠ½è±¡åªæ˜¯æ€»ç»“çš„ä¸€äº›èŒƒå¼ï¼Œè€Œè¿™äº›èŒƒå¼åœ¨æˆ‘çœ‹æ¥ä¸å¤ªä¸å®ç”¨ï¼Œè€Œä¸”æ›´ç³Ÿç³•çš„æ˜¯ç›´æ¥å°†æç¤ºè¯å†…åµŒå…¥ä»£ç ä¸­ï¼Œæ ¹æœ¬æ— æ³•æ›¿æ¢å’Œè¿­ä»£æç¤ºè¯ã€‚è€ŒAutoGenæ˜¯ä»¥å¤šæ™ºèƒ½ä½“æ¶æ„å’Œäº‹ä»¶é©±åŠ¨ä¸ºæ ¸å¿ƒå®ç°å¤æ‚åä½œå·¥ä½œæµï¼›è‡³äºLMQLä½œä¸ºä¸€ç§ç”¨äºè¯­è¨€æ¨¡å‹äº¤äº’çš„æŸ¥è¯¢è¯­è¨€æ›´åƒæ˜¯ç‚«æŠ€ï¼›Outlines èšç„¦åœ¨ç»“æ„åŒ–æ–‡æœ¬çš„ç”Ÿæˆï¼›MemGPTåªæƒ³å®ç°é•¿ä¹…è®°å¿†ï¼Œ è¿™äº›å°±ä¸å¤šåšè¯„ä»·äº†ã€‚</p>
<h2 id="wo-xiang-yao-de-ai-kuang-jia-he-xin-gong-neng" class="heading-control">æˆ‘æƒ³è¦çš„AIæ¡†æ¶æ ¸å¿ƒåŠŸèƒ½<a class="heading-anchor" href="#wo-xiang-yao-de-ai-kuang-jia-he-xin-gong-neng" aria-hidden="true"></a></h2>
<p>æˆ‘æƒ³è¦çš„æ˜¯ä»¥æç¤ºè¯ä¸ºæ ¸å¿ƒçš„æ¡†æ¶ï¼š</p>
<ol>
<li><strong>æç¤ºè¯å³å‡½æ•°</strong>ï¼šè®©æç¤ºè¯è±¡æ™®é€šå‡½æ•°ä¸€æ ·çš„ä½¿ç”¨ï¼Œç‹¬ç«‹æç¤ºè¯å¯ä»¥ä¸ä»£ç æ— ç¼åŒå‘è°ƒç”¨ï¼Œä»£ç å¯ä»¥è°ƒç”¨æç¤ºè¯è·å¾—ç»“æœï¼Œæç¤ºè¯ä¹Ÿå¯ä»¥è°ƒç”¨ä»£ç è·å¾—ç»“æœã€‚</li>
<li><strong>åŠ å¯†ä¿æŠ¤</strong>ï¼š æ”¯æŒæç¤ºè¯åŠ å¯†ï¼Œä¿éšœçŸ¥è¯†äº§æƒ</li>
<li><strong>æ¨¡å‹ä¸­ç«‹</strong>ï¼š æç¤ºè¯å¯é€‚é…ä¸åŒæ¨¡å‹åŠå‚æ•°è§„æ¨¡ã€‚</li>
<li><strong>ç»§æ‰¿æœºåˆ¶</strong>ï¼šæ”¯æŒæç¤ºè¯â€œç±»â€çš„ç»§æ‰¿ï¼Œå¦‚åŒé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</li>
<li><strong>ç®€æ´æ˜“ç”¨</strong>ï¼šæç¤ºè¯éœ€ç®€å•æ˜“è¯»å†™ã€‚</li>
<li><strong>æ‰“åŒ…ä¸ºåº”ç”¨</strong>ï¼šèƒ½å°†å¤šä¸ªæç¤ºè¯æ‰“åŒ…æˆå®Œæ•´AIåº”ç”¨ã€‚</li>
<li><strong>é«˜åº¦å¯æ‰©å±•</strong>ï¼šæ”¯æŒä»»æ„èƒ½åŠ›çš„æ‰©å±•ï¼Œå¦‚:çœ‹ï¼ˆå›¾ç”Ÿæ–‡ï¼‰ï¼Œå¬(STT)ï¼Œè¯´(TTS)ï¼Œç”»(æ–‡ç”Ÿå›¾/è§†é¢‘)ç­‰ç­‰ã€‚</li>
<li><strong>å…¨æ ˆå…¼å®¹</strong>ï¼šè·¨å¹³å°æ”¯æŒï¼ˆæµè§ˆå™¨ã€æœåŠ¡å™¨ç«¯ï¼‰ï¼Œå°½é‡ç»Ÿä¸€è¯­è¨€å‡å°‘ç»´æŠ¤æˆæœ¬ï¼ˆé€‰å‹JavaScriptï¼‰ã€‚</li>
</ol>
<h2 id="kai-fa-li-cheng" class="heading-control">å¼€å‘å†ç¨‹ ğŸ› ï¸<a class="heading-anchor" href="#kai-fa-li-cheng" aria-hidden="true"></a></h2>
<p>åœ¨2024å¹´å¤šæ–¹æœå¯»æ— æœçš„æƒ…å†µä¸‹ï¼Œ2024å¹´5æœˆæˆ‘å¼€å§‹ä»å¤´å†™<a href="https://github.com/offline-ai/ppe/" target="_blank" rel="noopener">å¯ç¼–ç¨‹æç¤ºè¯(Programmable Prompt Engine)AIè§„èŒƒ</a>ï¼Œå½“ç„¶æœ€å¼€å§‹ä¸æ˜¯å«è¿™ä¸ªåå­—ï¼Œæœ€å¼€å§‹å«<code>AI Agent Framework</code>,åæ¥æ˜¯è¡¨ä¼Ÿæè®®æ—¢ç„¶å®è´¨æ˜¯è®©æç¤ºè¯æˆä¸ºå¯ç¼–ç¨‹çš„è½¯ä»¶å·¥ç¨‹ï¼Œé‚£ä¹ˆä¸å¦¨å°±å«PPEï¼Œæˆ‘æƒ³ä¹Ÿå¯¹ï¼Œè¿™ä¸ªæ¦‚å¿µæ›´å‡†ç¡®ï¼ŒAI Agentåº”è¯¥æ˜¯ä»¥PPEæç¤ºè¯ä¸ºåŸºç¡€æ‰“é€ ï¼Œå®ƒå…¶å®æ˜¯æ›´ä¸Šå±‚çš„æ¦‚å¿µï¼Œé‚æ›´åä¸ºPPEã€‚</p>
<p>æ—¢ç„¶è¦å…¨æ ˆï¼Œé‚£å°±åªèƒ½é€‰JavaScript, ä»å‰ç«¯åˆ°åç«¯ï¼Œä»æœåŠ¡å™¨åˆ°æµè§ˆå™¨é€šåƒï¼Œå¹¶ä¸”JSæåº¦çµæ´»å’Œå¯æ‰©å±•ï¼Œè€Œè¿™æ­£æ˜¯æˆ‘æ‰€éœ€è¦çš„ã€‚</p>
<h3 id="jie-gou-hua-dui-hua-xiao-xi" class="heading-control">ç»“æ„åŒ–å¯¹è¯æ¶ˆæ¯<a class="heading-anchor" href="#jie-gou-hua-dui-hua-xiao-xi" aria-hidden="true"></a></h3>
<p>åˆšå¼€å§‹å†™çš„æ—¶å€™ï¼Œè¿˜æ˜¯å¾ˆèŒ«ç„¶æ— æªçš„ï¼Œæ²¡æœ‰é¡¹ç›®å¯ä¾›å‚è€ƒï¼Œ</p>
<p>æœ€åˆå°±æƒ³ç€ç”¨YAMLé…ç½®çš„æ–¹å¼ç®€å•çš„æ¥ç»“æ„åŒ–å¯¹è¯æ¶ˆæ¯,ç„¶åæ—¢ç„¶æç¤ºè¯æ˜¯å‡½æ•°é‚£å°±è‚¯å®šéœ€è¦çº¦å®šå‡½æ•°çš„è¾“å…¥å’Œè¾“å‡º: ç”¨<code>input</code>æ¥çº¦å®šæç¤ºè¯çš„è¾“å…¥å‚æ•°, <code>output</code>ç”¨<code>Json Schema</code>æ¥çº¦å®šæç¤ºè¯çš„è¾“å‡ºï¼š</p>
<pre><code class="yaml"><span class="hljs-attr">templateFormat:</span> <span class="hljs-string">hf</span>
<span class="hljs-attr">prompt:</span>
  <span class="hljs-attr">messages:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">system</span>
      <span class="hljs-attr">content:</span> <span class="hljs-string">Carefully</span> <span class="hljs-string">Think</span> <span class="hljs-string">about</span> <span class="hljs-string">the</span> <span class="hljs-string">intent</span> <span class="hljs-string">of</span> <span class="hljs-string">following</span> <span class="hljs-string">The</span> <span class="hljs-string">CONVERSATION</span> <span class="hljs-string">user</span> <span class="hljs-string">provided.</span> <span class="hljs-string">Output</span> <span class="hljs-string">the</span> <span class="hljs-string">json</span> <span class="hljs-string">object</span> <span class="hljs-string">with</span> <span class="hljs-string">the</span> <span class="hljs-string">Intent</span> <span class="hljs-string">Category</span> <span class="hljs-string">and</span> <span class="hljs-string">Reason.</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">role:</span> <span class="hljs-string">user</span>
      <span class="hljs-attr">content:</span> <span class="hljs-string">|-
        The CONVERSATION:
        {{ conversation }}
</span><span class="hljs-attr">input:</span>
  <span class="hljs-attr">conversation:</span> <span class="hljs-string">"messages[1].content"</span>
<span class="hljs-attr">output:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">Intent:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-attr">Reason:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
</code></pre>
<p>æ„Ÿè§‰ï¼Œè¿™æ ·å¾ˆä¸è‡ªç„¶æ–¹ä¾¿ï¼Œäºæ˜¯å°†ç»“æ„åŒ–å¯¹è¯æ¶ˆæ¯çš„è¾“å…¥/è¾“å‡ºé…ç½®ä¸å¯¹è¯å†…å®¹åˆ†ç¦»:</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">input:</span>
  <span class="hljs-attr">conversation:</span> <span class="hljs-string">{required:</span> <span class="hljs-literal">true</span><span class="hljs-string">}</span>
<span class="hljs-attr">output:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">object</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">Intent:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-attr">Reason:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">system:</span> <span class="hljs-string">Carefully</span> <span class="hljs-string">Think</span> <span class="hljs-string">about</span> <span class="hljs-string">the</span> <span class="hljs-string">intent</span> <span class="hljs-string">of</span> <span class="hljs-string">following</span> <span class="hljs-string">The</span> <span class="hljs-string">CONVERSATION</span> <span class="hljs-string">user</span> <span class="hljs-string">provided.</span> <span class="hljs-string">Output</span> <span class="hljs-string">the</span> <span class="hljs-string">json</span> <span class="hljs-string">object</span> <span class="hljs-string">with</span> <span class="hljs-string">the</span> <span class="hljs-string">Intent</span> <span class="hljs-string">Category</span> <span class="hljs-string">and</span> <span class="hljs-string">Reason.</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">|-
  The CONVERSATION:
  {{ conversation }}
</span></code></pre>
<p>è¿™æ ·å°±æ„Ÿè§‰å¥½å¤šäº†ã€‚</p>
<h3 id="an-xu-ge-shi-hua-xiao-xi" class="heading-control">æŒ‰éœ€æ ¼å¼åŒ–æ¶ˆæ¯<a class="heading-anchor" href="#an-xu-ge-shi-hua-xiao-xi" aria-hidden="true"></a></h3>
<p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°æˆ‘å¤§å¤šæ•°æ—¶å€™éƒ½éœ€è¦å»¶è¿Ÿå¯¹æ¶ˆæ¯è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¤ªæ—©æ ¼å¼åŒ–æ¶ˆæ¯ä¼šå› ä¸ºæ¶ˆæ¯è¢«æå‰å›ºåŒ–ï¼Œè€Œå¯¼è‡´æ¶ˆæ¯ä¸­ä¸æ˜¯æˆ‘æœŸæœ›çš„å‚æ•°å€¼ã€‚å› æ­¤ï¼ŒåŠ å…¥äº†æŒ‰éœ€æ ¼å¼åŒ–æ¶ˆæ¯åŠŸèƒ½ï¼Œå¹¶è®¾ç½®ä¸ºé»˜è®¤ã€‚è¯¥åŠŸèƒ½å¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°<code>formatStringStrategy</code>è¿›è¡Œæ”¹å˜:</p>
<ul>
<li><code>Raw</code>: ä¸åšä»»ä½•çš„æ ¼å¼åŒ–</li>
<li><code>Deferred</code>: æŒ‰éœ€æ ¼å¼åŒ–ï¼Œé»˜è®¤ç­–ç•¥</li>
<li><code>Immediate</code>: ç«‹å³æ ¼å¼åŒ–</li>
</ul>
<p>ä¾‹å¤–ï¼Œå½“æ‰§è¡Œ<code>$set</code>, <code>$get</code>, <code>$ret</code>ï¼Œ<code>$echo</code>æ“ä½œæ—¶ä¼šç«‹å³å¯¹æ¶ˆæ¯è¿›è¡Œæ ¼å¼åŒ–ã€‚</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># ä¿®æ”¹æœ¬è„šæœ¬çš„é»˜è®¤æ¶ˆæ¯æ ¼å¼åŒ–ç­–ç•¥ï¼š</span>
<span class="hljs-attr">formatStringStrategy:</span> <span class="hljs-string">Immediate</span>
<span class="hljs-meta">---</span>
</code></pre>
<h3 id="ti-shi-ci-tiao-yong-yu-dai-ma-ji-cheng" class="heading-control">æç¤ºè¯è°ƒç”¨ä¸ä»£ç é›†æˆ<a class="heading-anchor" href="#ti-shi-ci-tiao-yong-yu-dai-ma-ji-cheng" aria-hidden="true"></a></h3>
<p>é‚£ä¹ˆå¦‚ä½•åœ¨æç¤ºè¯ä¸­ä½¿ç”¨(è°ƒç”¨)AIèµ‹å€¼ä»¥åŠå…¶ä»–æç¤ºè¯æˆ–ä»£ç ï¼Ÿäºæ˜¯æœ‰äº†<code>é«˜çº§æ›¿æ¢</code>:</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># å¯¼å…¥jså‡½æ•°</span>
<span class="hljs-attr">import:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">eval.js</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># JOKEä¼šè¢«AIèµ‹å€¼,å­˜æ”¾äº: `prompt.JOKE` ä¸­ï¼Œä¾›ä¸‹æ¬¡ä½¿ç”¨</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"è®²ä¸ªç¬‘è¯ï¼š[[JOKE]] å¸Œæœ›æ‚¨å–œæ¬¢ï¼"</span>
<span class="hljs-comment"># è°ƒç”¨å¤–éƒ¨æç¤ºè¯`calculator`</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"äº”åŠ äºŒç­‰äº [[@calculator("</span><span class="hljs-number">5</span><span class="hljs-string">+2")]]"</span>
<span class="hljs-comment"># è°ƒç”¨å‡½æ•°ä»£ç `eval`</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"äº”åŠ äºŒç­‰äº [[@$eval("</span><span class="hljs-number">5</span><span class="hljs-string">+2")]]"</span>
</code></pre>
<pre><code class="js"><span class="hljs-comment">// eval.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">eval</span>(<span class="hljs-params">value</span>) </span>{
  <span class="hljs-keyword">return</span> ...
}
</code></pre>
<p>ç”šè‡³æ”¯æŒäº†è®©AIåªèƒ½åœ¨æˆ‘ç»™çš„åˆ—è¡¨ä¸­é€‰æ‹©:</p>
<pre><code class="yaml"><span class="hljs-attr">user:</span> <span class="hljs-string">ä½ å–œæ¬¢ä»€ä¹ˆæ°´æœ?</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"æˆ‘è¶…å–œæ¬¢[[FRUIT:|è‹¹æœ|é¦™è•‰|æ©™å­]]"</span>
</code></pre>
<h3 id="lian-shi-tiao-yong-yu-can-shu-chuan-di" class="heading-control">é“¾å¼è°ƒç”¨ä¸å‚æ•°ä¼ é€’<a class="heading-anchor" href="#lian-shi-tiao-yong-yu-can-shu-chuan-di" aria-hidden="true"></a></h3>
<p>å¦‚ä½•å°†æœ€è¿‘æ¶ˆæ¯å†…å®¹ä¼ é€’ç»™å¤–éƒ¨æç¤ºè¯ï¼Ÿé€šè¿‡ç®­å¤´ç¬¦å·<code>-&gt;</code>æ¥å®ç°åŠ¨æ€å‚æ•°ä¼ é€’:</p>
<pre><code class="yaml"><span class="hljs-attr">user:</span> <span class="hljs-string">"è®²ä¸ªç¬‘è¯å§ï¼"</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[JOKE]]"</span>
<span class="hljs-comment"># ä¼ å…¥æ™ºèƒ½ä½“çš„å®é™…è¾“å…¥å‚æ•°æ˜¯: {content: "[è¿™é‡Œæ˜¯ç”±AIç”Ÿæˆçš„ç¬‘è¯]", target_lang: "è‘¡è„ç‰™è¯­"}</span>
<span class="hljs-string">-&gt;</span> <span class="hljs-string">translator(target_lang="è‘¡è„ç‰™è¯­")</span> <span class="hljs-string">-&gt;</span> <span class="hljs-string">$print</span>
</code></pre>
<h3 id="zai-yi-lai-de-js-jiao-ben-zhong-tiao-yong-wai-bu-ti-shi-ci" class="heading-control">åœ¨ä¾èµ–çš„jsè„šæœ¬ä¸­è°ƒç”¨å¤–éƒ¨æç¤ºè¯<a class="heading-anchor" href="#zai-yi-lai-de-js-jiao-ben-zhong-tiao-yong-wai-bu-ti-shi-ci" aria-hidden="true"></a></h3>
<p>é‚£ä¹ˆï¼Œåè¿‡æ¥ï¼Œå¦‚ä½•åœ¨ä¾èµ–çš„jsè„šæœ¬è°ƒç”¨å¤–éƒ¨æç¤ºè¯å‘¢?</p>
<pre><code class="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callPPEScriptDemo</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.$exec({<span class="hljs-attr">id</span>: <span class="hljs-string">'calculator'</span>, <span class="hljs-attr">args</span>:{ <span class="hljs-attr">content</span>: <span class="hljs-string">"6+3"</span> }})
}
</code></pre>
<h3 id="nei-zhi-han-shu-zhi-ling-yu-luo-ji-kong-zhi" class="heading-control">å†…ç½®å‡½æ•°æŒ‡ä»¤ä¸é€»è¾‘æ§åˆ¶<a class="heading-anchor" href="#nei-zhi-han-shu-zhi-ling-yu-luo-ji-kong-zhi" aria-hidden="true"></a></h3>
<p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘éœ€è¦åœ¨æç¤ºè¯ä¸­æ ¹æ®ä¸åŒæ¡ä»¶æ¥äº§ç”Ÿä¸åŒçš„æç¤ºè¯ï¼Œç”šè‡³éœ€è¦å¤šæ¡ä»¶åŒ¹é…ï¼Œäºæ˜¯å¼€å§‹å†…ç½®ç›¸åº”çš„å‡½æ•°æŒ‡ä»¤: <code>$if</code>, <code>$match</code>, â€¦</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">input:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">file</span>
<span class="hljs-meta">---</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">$if:</span> <span class="hljs-string">"this.file"</span>
  <span class="hljs-attr">then:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">...</span>
</code></pre>
<p>å¹¶å‘æµ‹è¯•æœåŠ¡æä¾›å•†çš„ä¸åŒæ¨¡å‹:</p>
<pre><code class="yaml"><span class="hljs-string">$match(true,</span> <span class="hljs-string">allMatches=true,</span> <span class="hljs-string">parallel=true):</span>
  <span class="hljs-string">:true:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$AI(pushMessage=false,</span> <span class="hljs-string">model="openai://Qwen/Qwen2.5-Coder-7B-Instruct",</span> <span class="hljs-string">apiUrl="https://api.siliconflow.cn/",</span> <span class="hljs-string">apiKey="...")</span>
  <span class="hljs-string">:true:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">$AI(pushMessage=false,</span> <span class="hljs-string">model="openai://THUDM/glm-4-9b-chat",</span> <span class="hljs-string">apiUrl="https://api.siliconflow.cn/",</span> <span class="hljs-string">apiKey="...")</span>
</code></pre>
<p>éšåï¼Œå®Œå–„äº†å¾ªç¯æ§åˆ¶å‡½æ•°æŒ‡ä»¤: <code>$for</code>, <code>$while</code></p>
<h3 id="huan-cun-ji-zhi-yu-xing-neng-you-hua" class="heading-control">ç¼“å­˜æœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–<a class="heading-anchor" href="#huan-cun-ji-zhi-yu-xing-neng-you-hua" aria-hidden="true"></a></h3>
<p>ç„¶åï¼Œå‘ç°è¿™ä¸ªæç¤ºè¯&quot;å‡½æ•°&quot;æ‰§è¡Œè€—æ—¶é•¿ï¼Œå¦‚æœå¤šæ¬¡åå¤æ‰§è¡ŒåŒä¸€å‚æ•°çš„&quot;å‡½æ•°&quot;å°±æ›´æµªè´¹æ—¶é—´äº†ï¼Œä¸ºå•¥ä¸èƒ½ç¼“å­˜ç»“æœï¼Ÿäºæ˜¯æœ‰äº†LRUç¼“å­˜æ‰§è¡Œç»“æœï¼Œæ‰€æœ‰çš„å¤–éƒ¨è°ƒç”¨è„šæœ¬ç»“æœé»˜è®¤éƒ½ä¼šè¢«ç¼“å­˜ï¼Œå½“ç„¶å¯ä»¥ç®€å•é€šè¿‡å‚æ•°å¼€å…³<code>memoized</code>å…³é—­è¯¥è¡Œä¸ºï¼š</p>
<pre><code class="yaml"><span class="hljs-string">"[[@calculator(content="</span><span class="hljs-number">5</span><span class="hljs-string">+2",</span> <span class="hljs-string">memoized=false)]]"</span>
</code></pre>
<h3 id="da-mo-xing-de-jie-gou-hua-shu-chu" class="heading-control">å¤§æ¨¡å‹çš„ç»“æ„åŒ–è¾“å‡º<a class="heading-anchor" href="#da-mo-xing-de-jie-gou-hua-shu-chu" aria-hidden="true"></a></h3>
<p>å¤§æ¨¡å‹å¿…é¡»å¯¹è¾“å‡ºè¿›è¡Œç»“æ„åŒ–ï¼ˆçº¦å®šè¾“å‡ºï¼‰ï¼Œç¨‹åºä»£ç å‡½æ•°æ‰èƒ½å¤„ç†ã€‚é€šå¸¸æˆ‘ä»¬çº¦å®šçš„æ˜¯å¤§æ¨¡å‹ç»“æ„åŒ–è¾“å‡ºJSONå¯¹è±¡ã€‚</p>
<p>æˆ‘åœ¨å®è·µä¸­å‘ç°ï¼Œå¯¹äºæ¨ç†ä»»åŠ¡ï¼Œåœ¨ä¸çº¦æŸå¤§æ¨¡å‹è¾“å‡ºç±»å‹çš„æƒ…å†µä¸‹ï¼Œè¾“å‡ºè´¨é‡æ›´å¥½ï¼Œè€Œå¯¹äºä¸éœ€è¦æ¨ç†çš„åˆ†ç±»ä»»åŠ¡ï¼Œåˆ™æ°æ°ç›¸åã€‚å…³äºè¿™ä¸ªï¼Œæœ‰äººå·²ç»åšäº†æ›´è¯¦ç»†çš„æ¯”è¾ƒ: <a href="https://arxiv.org/html/2408.02442v1" target="_blank" rel="noopener">Let Me Speak Freely? A Study on the Impact of Format Restrictions on Performance of Large Language Models</a></p>
<p>å¦å¤–ï¼Œå¯¹å¤§æ¨¡å‹è¿›è¡Œçº¦å®šè¾“å‡ºæ ¼å¼çš„æ–‡æœ¬æ ¼å¼ä¹Ÿä¼šå½±å“è¾“å‡ºè´¨é‡ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰å®ƒå¦‚ä½•è¾“å‡ºçš„æ–¹å¼ã€‚ç”¨è‡ªç„¶è¯­è¨€è¡¨è¾¾å½¢å¼ï¼Œå¥½äºç›´æ¥ç»™å®šjson.</p>
<p>æˆ‘æµ‹è¯•ä¸‹æ¥ï¼Œå¯¹äºç›®å‰å¤§å¤šæ•° LLM æ¨¡å‹æ¥è®² <code>è‡ªç„¶è¯­è¨€ &gt; YAML &gt; XML &gt; JSON</code>ï¼Œå½“ç„¶å…·ä½“è¿˜è¦çœ‹ä¸ªåˆ«æ¨¡å‹æ˜¯å¦å¯¹æŸä¸ªæ ¼å¼åˆåšäº†é’ˆå¯¹æ€§çš„å­¦ä¹ ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘è®¾è®¡äº†å¤šç§ç»“æ„åŒ–å“åº”è¾“å‡ºæ ¼å¼ç±»å‹ï¼Œç”¨æ¥è‡ªåŠ¨å°†è¾“å‡ºå†…å®¹å’Œæ ¼å¼å‘Šè¯‰ç»™å¤§æ¨¡å‹ï¼Œä»¥åŠå°†å¤§æ¨¡å‹çš„è¾“å‡ºè‡ªåŠ¨è½¬æ¢ã€‚</p>
<ul>
<li>å¤šç§ç»“æ„åŒ–å“åº”è¾“å‡ºæ ¼å¼ç±»å‹(<code>response_format.type</code>)æ”¯æŒ:
<ul>
<li>JSON æ ¼å¼</li>
<li>YAML æ ¼å¼</li>
<li>è‡ªç„¶è¯­è¨€å¯¹è±¡(NOBJ) æ ¼å¼</li>
<li>ç”¨JSON Schemaæ ¼å¼è®¾ç½®å¥½<code>output</code>.PPEå°±ä¼šè‡ªåŠ¨è§£æAIç”Ÿæˆçš„å¯¹åº”æ ¼å¼çš„å†…å®¹ä¸º<code>Object</code>ä¾›ä»£ç ä½¿ç”¨.</li>
</ul>
</li>
</ul>
<p>çº¦å®šPPEè„šæœ¬è¾“å‡ºå†…å®¹å§‹ç»ˆç”¨<code>JSON Schema</code>è¡¨ç¤ºï¼Œè€Œé€‰æ‹©å‘ŠçŸ¥å¤§æ¨¡å‹çš„æ–¹å¼åˆ™åœ¨<code>parameters.response_format.type</code>ä¸­æ§åˆ¶ã€‚è¿™æ ·ï¼Œæœ€ç»ˆç»™åˆ°ä»£ç è¿™è¾¹çš„ç»“æœå§‹ç»ˆæ˜¯è½¬æ¢åçš„<code>JSON</code>å¯¹è±¡ã€‚å¦‚æœè½¬æ¢å¤±è´¥ï¼Œä¼šè§¦å‘å¼‚å¸¸é”™è¯¯ï¼Œé€šè¿‡è®¾ç½®<code>forceJson</code>ä¸º<code>false</code>ç¦æ­¢è§¦å‘å¼‚å¸¸ï¼Œè¿™æ—¶å½“æ— æ³•è½¬æ¢ï¼Œå°±ä¼šè¿”å›æ–‡æœ¬å†…å®¹ã€‚</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">output:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">"object"</span>
  <span class="hljs-attr">properties:</span>
    <span class="hljs-attr">target_text:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">"string"</span>
<span class="hljs-attr">parameters:</span>
  <span class="hljs-comment"># ä½¿ç”¨åé¢çš„å‚æ•°,å°†è®¾ç½®å¼ºåˆ¶jsonè¾“å‡ºæ ¼å¼,ç¡®ä¿å¤§æ¨¡å‹æ€»æ˜¯è¾“å‡ºæ­£ç¡®çš„jsonæ ¼å¼.</span>
  <span class="hljs-attr">response_format:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">"json"</span>
<span class="hljs-comment"># forceJson: false</span>
<span class="hljs-meta">---</span>
</code></pre>
<h3 id="duo-lun-dui-hua-zhi-chi" class="heading-control">å¤šè½®å¯¹è¯æ”¯æŒ<a class="heading-anchor" href="#duo-lun-dui-hua-zhi-chi" aria-hidden="true"></a></h3>
<p>å¦‚ä½•åœ¨åŒä¸€ä¸ªè„šæœ¬ä¸­å¼€å¯å¤šè½®å¯¹è¯ï¼Œäºæ˜¯æœ‰äº†ä¸‰ä¸ªçŸ­åˆ’çº¿(<code>---</code>) æˆ–æ˜Ÿå· <code>***</code> è¡¨ç¤ºä¸€ä¸ªæ–°çš„å¯¹è¯å¼€å§‹:</p>
<pre><code class="yaml"><span class="hljs-attr">system:</span> <span class="hljs-string">"æ‚¨æ˜¯ä¸€ä½AIåŠ©æ‰‹ã€‚"</span>
<span class="hljs-comment"># ç¬¬ä¸€ä¸ªåˆ†éš”çº¿ä½œä¸ºå¯¹è¯çš„èµ·ç‚¹,ç¬¬ä¸€ä¸ªåˆ†éš”çº¿ä¸Šé¢çš„å¯¹è¯å†…å®¹ä¼šè¢«éšè—ï¼Œå¯ä»¥å½“ä½œç³»ç»Ÿæç¤ºè¯,å®ƒä»¬ä¸ä¼šè¢«è¾“å‡ºæˆ–è®°å½•.</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">"10åŠ 18ç­‰äºå¤šå°‘ï¼Ÿ"</span>
<span class="hljs-comment"># æ‰§è¡ŒAI,æ›¿æ¢ä¸ºAIä¼ å›çš„ç»“æœresult</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[result]]"</span>
<span class="hljs-comment"># æ‰“å°å¤§æ¨¡å‹ä¼ å›çš„ç»“æœ</span>
<span class="hljs-string">$print:</span> <span class="hljs-string">"?=result"</span>
<span class="hljs-comment"># ç¬¬äºŒä¸ªåˆ†éš”çº¿ä¸‹é¢å¼€å§‹æ–°å¯¹è¯,å›åˆ°ç¬¬ä¸€æ¬¡çš„èµ·ç‚¹</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"10åŠ 12ç­‰äºå¤šå°‘ï¼Ÿ"</span>
<span class="hljs-comment"># æ‰§è¡ŒAI,æ›¿æ¢ä¸ºAIä¼ å›çš„ç»“æœresult</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[result]]"</span>
</code></pre>
<h3 id="ji-cheng-ji-zhi-ti-shi-ci-de-lei" class="heading-control">ç»§æ‰¿æœºåˆ¶ï¼šæç¤ºè¯çš„â€œç±»â€<a class="heading-anchor" href="#ji-cheng-ji-zhi-ti-shi-ci-de-lei" aria-hidden="true"></a></h3>
<p><strong>åŸºç±»å®šä¹‰</strong>ï¼ˆ<code>char.ai.yaml</code>ï¼‰ï¼š</p>
<pre><code class="yaml"><span class="hljs-attr">type:</span> <span class="hljs-string">type</span>
<span class="hljs-comment"># å®šä¹‰è¯¥è§’è‰²ç±»å‹çš„è¾“å…¥é…ç½®</span>
<span class="hljs-attr">input:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">{required:</span> <span class="hljs-literal">true</span><span class="hljs-string">}</span>  <span class="hljs-comment"># å¿…é¡»æä¾›çš„ä¿¡æ¯ï¼šè§’è‰²çš„åå­—</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">description</span>             <span class="hljs-comment"># å¯é€‰çš„ä¿¡æ¯ï¼šå¯¹è§’è‰²çš„æè¿°</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># ç³»ç»Ÿæ ¹æ®æä¾›çš„ä¿¡æ¯æ¥æŒ‡å¯¼è§’è‰²çš„è¡Œä¸º</span>
<span class="hljs-attr">system:</span> <span class="hljs-string">|-
  ä½ æ˜¯ä¸€ä¸ªèªæ˜ã€å¤šæ‰å¤šè‰ºçš„è§’è‰²æ‰®æ¼”è€…ã€‚
  ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ä¸‹é¢æä¾›çš„ä¿¡æ¯å®Œç¾åœ°æ‰®æ¼”è§’è‰²ã€‚
  è¯·è¯´è¯å°±åƒ{{name}}ä¸€æ ·ã€‚
  ä½ å°±æ˜¯{{name}}ã€‚
</span>
  <span class="hljs-string">{{description}}</span>
</code></pre>
<p><strong>å­ç±»å®ç°</strong>ï¼ˆ<code>char_dobby.ai.yaml</code>ï¼‰ï¼š</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># è¡¨ç¤ºç»§æ‰¿è‡ªcharè§’è‰²ç±»å‹è„šæœ¬</span>
<span class="hljs-attr">type:</span> <span class="hljs-string">char</span>
<span class="hljs-comment"># è¿™é‡Œæ˜¯æ ¹æ®â€œcharâ€è§’è‰²çš„ä¸€äº›å…·ä½“è®¾ç½®</span>
<span class="hljs-comment"># è§’è‰²çš„åå­—</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">"Dobby"</span>
<span class="hljs-comment"># å¯¹è§’è‰²çš„æè¿°</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">"Dobby æ˜¯å“ˆåˆ©æ³¢ç‰¹ä¸–ç•Œé‡Œçš„ä¸€ä¸ªå°ç²¾çµ"</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># ç”¨æˆ·æé—®</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"ä½ æ˜¯è°?"</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># æ ¹æ®è§’è‰²è®¾å®šçš„å›ç­”</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"æˆ‘æ˜¯ Dobbyã€‚Dobby å¾ˆå¼€å¿ƒã€‚"</span>
</code></pre>
<h3 id="duo-zhi-neng-ti-qun-liao-guan-li-yu-si-liao" class="heading-control">å¤šæ™ºèƒ½ä½“ç¾¤èŠç®¡ç†ä¸ç§èŠ<a class="heading-anchor" href="#duo-zhi-neng-ti-qun-liao-guan-li-yu-si-liao" aria-hidden="true"></a></h3>
<p>ç¾¤èŠå’‹å¼„?é€šè¿‡<code>roles</code>çº¦å®šä½¿ç”¨çš„å¤–éƒ¨è§’è‰²åˆ—è¡¨:</p>
<pre><code class="yaml"><span class="hljs-comment"># guide.ai.yaml</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">"You are a professional guide. You can guide the user to complete the task."</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">"guide"</span>
<span class="hljs-comment"># çº¦å®šä½¿ç”¨çš„è§’è‰²åˆ—è¡¨ï¼Œkeyä¸ºè§’è‰²åˆ«åï¼Œå€¼ä¸ºè§’è‰²è„šæœ¬ID</span>
<span class="hljs-attr">roles:</span>
  <span class="hljs-attr">translator:</span> <span class="hljs-string">char_translator</span>
  <span class="hljs-attr">dobby:</span> <span class="hljs-string">char_dobby</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">system:</span> <span class="hljs-string">You</span> <span class="hljs-string">are</span> <span class="hljs-string">a</span> <span class="hljs-string">professional</span> <span class="hljs-string">guide.</span> <span class="hljs-string">You</span> <span class="hljs-string">can</span> <span class="hljs-string">guide</span> <span class="hljs-string">the</span> <span class="hljs-string">user</span> <span class="hljs-string">to</span> <span class="hljs-string">complete</span> <span class="hljs-string">the</span> <span class="hljs-string">task.</span>
<span class="hljs-string">---</span> <span class="hljs-comment"># New dialogue starts here</span>
<span class="hljs-comment"># ç”¨æˆ·å¯¹dobbyè¯´ï¼Œdobbyè„šæœ¬è‡ªåŠ¨ï¼ˆä¸€å®šï¼‰å›å¤</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"@dobby, I want to go to the moon."</span>
<span class="hljs-comment"># guide å¯¹translatorè¯´</span>
<span class="hljs-attr">guide:</span> <span class="hljs-string">"@translator, translate the dobby's message to chinese without explanation."</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">How</span> <span class="hljs-string">to</span> <span class="hljs-string">go</span> <span class="hljs-string">to</span> <span class="hljs-string">the</span> <span class="hljs-string">moon?</span>
<span class="hljs-attr">dobby:</span> <span class="hljs-string">"[[AI]]"</span>
</code></pre>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•åœ¨ç¾¤èŠä¸­è¿›è¡Œç§èŠï¼Ÿç®€å•ï¼Œåœ¨<code>@dobby</code>ååŠ ä¸Šå‚æ•°<code>@dobby(ç§)</code>å³å¯ï¼Œè¿™æ ·dobbyçš„å›å¤åªæœ‰è¯¥ç”¨æˆ·å¯è§ï¼ŒèŠå¤©å®¤ä¸­å…¶ä»–è§’è‰²çœ‹ä¸åˆ°ã€‚</p>
<h3 id="nei-jian-ben-di-llm-ti-gong-shang" class="heading-control">å†…å»ºæœ¬åœ°LLMæä¾›å•†<a class="heading-anchor" href="#nei-jian-ben-di-llm-ti-gong-shang" aria-hidden="true"></a></h3>
<p>å½“å‰ï¼Œå¤–ç½®çš„llama-cpp serverå·²ç»æ»¡è¶³ä¸äº†æˆ‘çš„éœ€æ±‚:</p>
<ol>
<li>æ— æ³•åŠ¨æ€åŠ è½½åˆ‡æ¢LLMå¤§æ¨¡å‹</li>
<li>æ— æ³•å¯¹æç¤ºè¯è¿›è¡Œå®‰å…¨æ§åˆ¶
<ol>
<li>ç³»ç»Ÿæ¨¡æ¿åæ³¨å…¥</li>
<li>æç¤ºè¯ä¿æŠ¤</li>
</ol>
</li>
<li>æ— æ³•è‡ªåŠ¨é€‚é…ç¡¬ä»¶: è‡ªåŠ¨æ£€æµ‹å†…å­˜å’ŒGPUï¼Œå¹¶é»˜è®¤ä½¿ç”¨æœ€ä½³è®¡ç®—å±‚ï¼Œè‡ªåŠ¨åˆ†é…gpu-layersä»¥åŠä¸Šä¸‹æ–‡çª—å£å¤§å°, ä»¥ä¾¿ä»ç¡¬ä»¶ä¸­è·å¾—æœ€ä½³æ€§èƒ½ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ä»»ä½•å†…å®¹ã€‚</li>
<li>æ— æ³•ä¸ºæŒ‡å®šçš„å•è¯æå‡/é™ä½æƒé‡ï¼Œç±»ä¼¼åœ¨stable-diffusionä¸­ï¼ˆæš‚æœªå®ç°ï¼‰</li>
</ol>
<p>å› æ­¤å¼€å‘å®ç°äº†å†…ç½®çš„æœ¬åœ°LLMæä¾›å•†.</p>
<ul>
<li>
<p>æ”¯æŒå¤šLLMæœåŠ¡æä¾›å•†ï¼š</p>
<ul>
<li>ï¼ˆ<strong>æ¨è</strong>ï¼‰**å†…ç½®æœ¬åœ°LLMæä¾›å•†ï¼ˆllama.cppï¼‰**ä½œä¸ºé»˜è®¤é€‰é¡¹ï¼Œä»¥ä¿æŠ¤çŸ¥è¯†çš„å®‰å…¨æ€§å’Œéšç§ã€‚
<ul>
<li>é¦–å…ˆä¸‹è½½GGUFæ¨¡å‹æ–‡ä»¶ï¼š<code>ai brain download hf://bartowski/Qwen_QwQ-32B-GGUF -q q4_0</code></li>
<li>ä½¿ç”¨é»˜è®¤çš„å¤§è„‘æ¨¡å‹æ–‡ä»¶è¿è¡Œï¼š<code>ai run example.ai.yaml</code></li>
<li>ä½¿ç”¨æŒ‡å®šçš„æ¨¡å‹æ–‡ä»¶è¿è¡Œï¼š<code>ai run example.ai.yaml -P local://bartowski-qwq-32b.Q4_0.gguf</code></li>
</ul>
</li>
<li>å…¼å®¹OpenAIçš„æœåŠ¡æä¾›å•†ï¼š
<ul>
<li>OpenAI: <code>ai run example.ai.yaml -P openai://chatgpt-4o-latest --apiKey â€œsk-XXXâ€</code></li>
<li>DeepSeek: <code>ai run example.ai.yaml -P openai://deepseek-chat -u https://api.deepseek.com/ --apiKey â€œsk-XXXâ€</code></li>
<li>Siliconflow: <code>ai run example.ai.yaml -P openai://Qwen/Qwen2.5-Coder-7B-Instruct -u https://api.siliconflow.cn/ --apiKey â€œsk-XXXâ€</code></li>
<li>Anthropic(Claude): <code>ai run example.ai.yaml -P openai://claude-3-7-sonnet-latest -u https://api.anthropic.com/v1/ --apiKey â€œsk-XXXâ€</code></li>
</ul>
</li>
<li><a href="https://github.com/ggml-org/llama.cpp/tree/master/examples/server" target="_blank" rel="noopener">llama-cppæœåŠ¡å™¨(llama-server)æä¾›å•†</a>ï¼š<code>ai run example.ai.yaml -P llamacpp</code>
<ul>
<li>llama-cppæœåŠ¡å™¨ä¸æ”¯æŒæŒ‡å®šæ¨¡å‹åç§°ï¼Œå®ƒæ˜¯åœ¨å¯åŠ¨llama-serveræ—¶é€šè¿‡ model å‚æ•°æŒ‡å®šçš„ã€‚</li>
</ul>
</li>
<li>æ‚¨å¯ä»¥åœ¨PPEè„šæœ¬ä¸­æŒ‡å®šæˆ–ä»»æ„åˆ‡æ¢<em>LLMæ¨¡å‹æˆ–æä¾›å•†</em>:</li>
</ul>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">parameters:</span>
  <span class="hljs-attr">model:</span> <span class="hljs-string">openai://deepseek-chat</span>
  <span class="hljs-attr">apiUrl:</span> <span class="hljs-string">https://api.deepseek.com/</span>
  <span class="hljs-attr">apiKey:</span> <span class="hljs-string">"sk-XXX"</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">system:</span> <span class="hljs-string">You</span> <span class="hljs-string">are</span> <span class="hljs-string">a</span> <span class="hljs-string">helpful</span> <span class="hljs-string">assistant.</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">"tell me a joke"</span>
<span class="hljs-string">---</span> <span class="hljs-comment"># first dialog begin</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[AI]]"</span>
<span class="hljs-string">---</span> <span class="hljs-comment"># reset to first</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[AI:model='openai://claude-3-7-sonnet-latest',apiUrl='https://api.anthropic.com/v1/',apiKey='sk-XXX']]"</span>
<span class="hljs-string">---</span> <span class="hljs-comment"># reset to first</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[AI:model='local://bartowski-qwq-32b.Q4_0.gguf']]"</span>
</code></pre>
</li>
</ul>
<h3 id="tong-yong-da-mo-xing-gong-ju-an-quan-tiao-yong-jin-xian-nei-zhi-de-llm-ti-gong-shang" class="heading-control">é€šç”¨å¤§æ¨¡å‹å·¥å…·å®‰å…¨è°ƒç”¨(ä»…é™å†…ç½®çš„LLMæä¾›å•†)<a class="heading-anchor" href="#tong-yong-da-mo-xing-gong-ju-an-quan-tiao-yong-jin-xian-nei-zhi-de-llm-ti-gong-shang" aria-hidden="true"></a></h3>
<p>è®©å¤§æ¨¡å‹è‡ªä¸»ä½¿ç”¨å·¥å…·(Tool Func)çš„ç¡®å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥å®ç°å¤§æ¨¡å‹çš„å…¨è‡ªåŠ¨åŒ–ï¼Œä½†æ˜¯å¦‚ä½•ä¿è¯å®‰å…¨å‘¢ï¼Ÿè¿˜æœ‰ä¸ºå•¥å¿…é¡»è¦ç‰¹åˆ«è®­ç»ƒçš„å¤§æ¨¡å‹æ‰èƒ½æ”¯æŒå·¥å…·è°ƒç”¨ï¼Ÿæœ‰æ²¡æœ‰é€šç”¨çš„åŠæ³•ï¼Œæ— éœ€ç‰¹åˆ«é’ˆå¯¹è®­ç»ƒï¼Œè®©æ‰€æœ‰çš„å¤§æ¨¡å‹éƒ½æ”¯æŒå·¥å…·è°ƒç”¨ï¼Ÿå¦‚ä½•è®©å·¥å…·çš„ä½¿ç”¨æ›´åŠ ç®€å•ï¼Ÿ ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œç»ˆäºæå®šï¼Œä¸‹é¢è¯·çœ‹:</p>
<p>é€šè¿‡<code>tools</code>é…ç½®é™åˆ¶å¯è°ƒç”¨çš„å·¥å…·ï¼š</p>
<pre><code class="yaml"><span class="hljs-comment"># åªè¦åœ¨è„šæœ¬é…ç½®ä¸­è®¾å®šå…è®¸æ™ºèƒ½ä½“ä½¿ç”¨çš„å·¥å…·`tools`ï¼Œ è¿™äº›å·¥å…·`tools`å¯¹åº”PPEè„šæœ¬IDï¼Œæ™ºèƒ½ä½“å°±ä¼šåœ¨éœ€è¦çš„æ—¶å€™è‡ªä¸»è°ƒç”¨è¿™äº›å·¥å…·å®Œæˆä»»åŠ¡ã€‚</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">tools:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">weather</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">search</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">now</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">ç°åœ¨å‡ ç‚¹äº†ï¼Ÿä»Šå¤©ä¸Šæµ·çš„å¤©æ°”å¦‚ä½•ï¼Ÿ</span>
<span class="hljs-comment">#æ™ºèƒ½ä½“ä¼šæ ¹æ®é…ç½®çš„toolsè°ƒç”¨å¯¹åº”çš„å·¥å…·: now, weather,å¹¶è¿”å›ç»“æœ</span>
<span class="hljs-attr">assistant:</span> <span class="hljs-string">"[[Answer]]"</span>
</code></pre>
<pre><code class="yaml"><span class="hljs-comment"># weather.ai.yaml</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">title:</span> <span class="hljs-string">get</span> <span class="hljs-string">weather</span> <span class="hljs-string">information</span>
<span class="hljs-attr">input:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">location:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">contain</span> <span class="hljs-string">city,</span> <span class="hljs-string">province(if</span> <span class="hljs-string">any)</span> <span class="hljs-string">and</span> <span class="hljs-string">country</span>
      <span class="hljs-attr">example:</span> <span class="hljs-string">city,province,country</span>
      <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">date:</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">the</span> <span class="hljs-string">weather</span> <span class="hljs-string">information</span> <span class="hljs-string">of</span> <span class="hljs-string">the</span> <span class="hljs-string">specified</span> <span class="hljs-string">date</span>
      <span class="hljs-attr">example:</span> <span class="hljs-number">2025</span><span class="hljs-number">-02</span><span class="hljs-string">-04T18:07:42+08:00</span>
      <span class="hljs-attr">default:</span> <span class="hljs-string">today</span>
<span class="hljs-meta">---</span>
<span class="hljs-comment"># æ¨¡æ‹Ÿè¿”å›å¤©æ°”ä¿¡æ¯</span>
<span class="hljs-string">$echo:</span> <span class="hljs-string">"ä¸Šæµ·çš„å¤©æ°”é˜´è½¬å¤šäº‘ï¼Œæ°”æ¸© 2Â°Cï¼Œç›¸å¯¹æ¹¿åº¦ 60%ï¼Œé£å‘ ä¸œå—é£ï¼Œé£åŠ› 3-4çº§ã€‚"</span>
</code></pre>
<p>ä¸ºäº†è¿›ä¸€æ­¥ä¿éšœå®‰å…¨ï¼Œé™¤äº†é™å®šæ‰§è¡Œè„šæœ¬è®¾å®šçš„å·¥å…·åˆ—è¡¨å¤–ï¼Œç”¨æˆ·ï¼ˆè°ƒç”¨æ–¹ï¼‰ä¹Ÿå¯é™åˆ¶ä½¿ç”¨çš„å·¥å…·åˆ—è¡¨ï¼Œè¿›è¡ŒåŒé‡é™åˆ¶:</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># ç”¨æˆ·æˆ–ä¸Šçº§è„šæœ¬é€šè¿‡å¦‚ä¸‹é…ç½®å¯¹æ™ºèƒ½ä½“ä½¿ç”¨çš„å·¥å…·è¿›è¡Œæƒé™æ§åˆ¶</span>
<span class="hljs-attr">permissions:</span>
  <span class="hljs-attr">ai:</span>
    <span class="hljs-attr">call:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"w*"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"now"</span>
<span class="hljs-meta">---</span>
</code></pre>
<h3 id="tong-yong-da-mo-xing-si-wei-mo-shi-kuo-zhan-jin-xian-nei-zhi-de-llm-ti-gong-shang" class="heading-control">é€šç”¨å¤§æ¨¡å‹æ€ç»´æ¨¡å¼æ‰©å±• ğŸ§  (ä»…é™å†…ç½®çš„LLMæä¾›å•†)<a class="heading-anchor" href="#tong-yong-da-mo-xing-si-wei-mo-shi-kuo-zhan-jin-xian-nei-zhi-de-llm-ti-gong-shang" aria-hidden="true"></a></h3>
<p>DeepSeek é‡æ–°å‘ç°å¹¶å¼€æºäº†OpenAI(CloseAI)äº†ç§˜è€Œä¸å®£çš„æ·±åº¦æ€ç»´æ¨¡å¼çš„è®­ç»ƒåŠæ³•ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œä¸éœ€è¦é¢å¤–è®­ç»ƒï¼Œè®©AIå¤§æ¨¡å‹ä¹Ÿèƒ½è¿›è¡Œæ·±åº¦æ€è€ƒï¼Ÿåº”è¯¥å¯è¡Œï¼Œå› ä¸ºæ‰€è°“çš„å¾®è°ƒè®­ç»ƒä¹Ÿæ˜¯åŸºäºCoTçš„æç¤ºè¯è¿›è¡Œï¼Œäºæ˜¯ç»è¿‡ä»”ç»†æ€è€ƒï¼Œå¤šç•ªæµ‹è¯•ï¼Œç»ˆäºæå®šåŒ…æ‹¬æ·±åº¦æ€ç»´æ¨¡å¼åœ¨å†…çš„å¤šç§æ€ç»´æ¨¡å¼(<code>shouldThink</code>)ï¼</p>
<p>æ€ç»´æ¨¡å¼(<code>shouldThink</code>)æˆ‘åˆ†ä¸ºå››ç§ï¼šç›´æ¥å›ç­”ä¸æ€è€ƒ(<code>off</code>)ï¼›å…ˆå›ç­”å†æ€è€ƒ(<code>last</code>)ï¼›å…ˆæ€è€ƒå†å›ç­”<code>first</code>ï¼›æ·±åº¦æ€è€ƒåå†å›ç­”<code>deep</code>ï¼š</p>
<pre><code class="yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># æ€ç»´æ¨¡å¼é»˜è®¤ä¸º `off`,è®¾ç½®ä¸ºlastï¼Œfirst,deepåè‡ªåŠ¨å¯ç”¨ã€‚</span>
<span class="hljs-attr">shouldThink:</span> <span class="hljs-string">deep</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">user:</span> <span class="hljs-string">æ ‘ä¸Šæœ‰15åªé¸Ÿï¼ŒçŒäººå¼€æªæ‰“ä¸­äº†2åªï¼Œæ ‘ä¸Šè¿˜æœ‰å‡ åªé¸Ÿï¼Ÿ</span>
</code></pre>
<h3 id="package-zhi-chi" class="heading-control">Package æ”¯æŒ<a class="heading-anchor" href="#package-zhi-chi" aria-hidden="true"></a></h3>
<p>ç›®çš„ï¼šéœ€è¦å°†ç›¸å…³çš„æç¤ºè¯å’Œä»£ç è„šæœ¬ã€çŸ¥è¯†åº“æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶åŒ…ä¸­ï¼Œç»„æˆæ™ºèƒ½ä½“ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p>
<p>é€šè¿‡è¿™äº›è®¾è®¡ï¼ŒPPE æ­£åœ¨é€æ­¥æ”¯æŒæˆ‘æœ€åˆå¯¹ã€ŒçœŸ AI PCã€çš„æƒ³è±¡ï¼ğŸš€</p>
<p>å°½ç®¡è¿˜å¤„äºWIPé˜¶æ®µï¼Œä¸è¿‡ PPE å·²ç»å®ç°äº†æˆ‘è®¾æƒ³çš„å¤§éƒ¨åˆ†åŠŸèƒ½ã€‚</p>

    </div>

    
    
    <div class="post-widgets">
    <div
      class="social-share"
      
        data-sites="weibo,qq,wechat,tencent,douban,qzone,linkedin,diandian,facebook,twitter,google"
      
      
        data-wechat-qrcode-title="å¾®ä¿¡"
      
      
        data-wechat-qrcode-helper="åˆ†äº«åˆ°å¾®ä¿¡"
      
    >
    </div>
  </div>
  <script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>riceball
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="/https:/riceball.me/article/Build-an-application-oriented-AI-framework-from-scratch/" title="ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶">https://riceball.me/article/Build-an-application-oriented-AI-framework-from-scratch/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/learning/" rel="tag"><i class="fa fa-tag"></i> learning</a>
              <a href="/tags/ai/" rel="tag"><i class="fa fa-tag"></i> ai</a>
              <a href="/tags/deep-learning/" rel="tag"><i class="fa fa-tag"></i> deep learning</a>
              <a href="/tags/framework/" rel="tag"><i class="fa fa-tag"></i> framework</a>
              <a href="/tags/AI-language/" rel="tag"><i class="fa fa-tag"></i> AI language</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/article/ppe_dev_summary/" rel="prev" title="PPE å¯ç¼–ç¨‹æç¤ºè¯å·¥ç¨‹å¼•æ“è‰æ¡ˆå¼€å‘æ‘˜è¦">
      <i class="fa fa-chevron-left"></i> PPE å¯ç¼–ç¨‹æç¤ºè¯å·¥ç¨‹å¼•æ“è‰æ¡ˆå¼€å‘æ‘˜è¦
    </a></div>
      <div class="post-nav-item">
    <a href="/article/css-frameworks/" rel="next" title="å‰ç«¯ CSS æ¡†æ¶å‘å±•å˜è¿">
      å‰ç«¯ CSS æ¡†æ¶å‘å±•å˜è¿ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
      <div class="tabs tabs-comment">
        <ul class="nav-tabs">
            <li class="tab"><a href="#comment-utteranc">utteranc</a></li>
            <li class="tab"><a href="#comment-disqusjs">Disqus</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane utteranc" id="comment-utteranc">
              
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="snowyu/snowyu.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  
            </div>
            <div class="tab-pane disqusjs" id="comment-disqusjs">
              
  <div class="comments" id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  
            </div>
        </div>
      </div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#cong-tou-shou-cuo-mian-xiang-ying-yong-de-ai-kuang-jia"><span class="nav-number">1.</span> <span class="nav-text">ğŸŒŸ ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶ ğŸš€</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#wei-shi-mo-cong-tou-shou-cuo-ai-kuang-jia-er-bu-shi-shi-yong-xian-you-kuang-jia"><span class="nav-number">1.1.</span> <span class="nav-text">ä¸ºä»€ä¹ˆä»å¤´æ‰‹æ“ AI æ¡†æ¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æœ‰æ¡†æ¶ï¼Ÿ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wo-xiang-yao-de-ai-kuang-jia-he-xin-gong-neng"><span class="nav-number">1.2.</span> <span class="nav-text">æˆ‘æƒ³è¦çš„AIæ¡†æ¶æ ¸å¿ƒåŠŸèƒ½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#kai-fa-li-cheng"><span class="nav-number">1.3.</span> <span class="nav-text">å¼€å‘å†ç¨‹ ğŸ› ï¸</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jie-gou-hua-dui-hua-xiao-xi"><span class="nav-number">1.3.1.</span> <span class="nav-text">ç»“æ„åŒ–å¯¹è¯æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#an-xu-ge-shi-hua-xiao-xi"><span class="nav-number">1.3.2.</span> <span class="nav-text">æŒ‰éœ€æ ¼å¼åŒ–æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ti-shi-ci-tiao-yong-yu-dai-ma-ji-cheng"><span class="nav-number">1.3.3.</span> <span class="nav-text">æç¤ºè¯è°ƒç”¨ä¸ä»£ç é›†æˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lian-shi-tiao-yong-yu-can-shu-chuan-di"><span class="nav-number">1.3.4.</span> <span class="nav-text">é“¾å¼è°ƒç”¨ä¸å‚æ•°ä¼ é€’</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#zai-yi-lai-de-js-jiao-ben-zhong-tiao-yong-wai-bu-ti-shi-ci"><span class="nav-number">1.3.5.</span> <span class="nav-text">åœ¨ä¾èµ–çš„jsè„šæœ¬ä¸­è°ƒç”¨å¤–éƒ¨æç¤ºè¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nei-zhi-han-shu-zhi-ling-yu-luo-ji-kong-zhi"><span class="nav-number">1.3.6.</span> <span class="nav-text">å†…ç½®å‡½æ•°æŒ‡ä»¤ä¸é€»è¾‘æ§åˆ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#huan-cun-ji-zhi-yu-xing-neng-you-hua"><span class="nav-number">1.3.7.</span> <span class="nav-text">ç¼“å­˜æœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#da-mo-xing-de-jie-gou-hua-shu-chu"><span class="nav-number">1.3.8.</span> <span class="nav-text">å¤§æ¨¡å‹çš„ç»“æ„åŒ–è¾“å‡º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#duo-lun-dui-hua-zhi-chi"><span class="nav-number">1.3.9.</span> <span class="nav-text">å¤šè½®å¯¹è¯æ”¯æŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ji-cheng-ji-zhi-ti-shi-ci-de-lei"><span class="nav-number">1.3.10.</span> <span class="nav-text">ç»§æ‰¿æœºåˆ¶ï¼šæç¤ºè¯çš„â€œç±»â€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#duo-zhi-neng-ti-qun-liao-guan-li-yu-si-liao"><span class="nav-number">1.3.11.</span> <span class="nav-text">å¤šæ™ºèƒ½ä½“ç¾¤èŠç®¡ç†ä¸ç§èŠ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nei-jian-ben-di-llm-ti-gong-shang"><span class="nav-number">1.3.12.</span> <span class="nav-text">å†…å»ºæœ¬åœ°LLMæä¾›å•†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tong-yong-da-mo-xing-gong-ju-an-quan-tiao-yong-jin-xian-nei-zhi-de-llm-ti-gong-shang"><span class="nav-number">1.3.13.</span> <span class="nav-text">é€šç”¨å¤§æ¨¡å‹å·¥å…·å®‰å…¨è°ƒç”¨(ä»…é™å†…ç½®çš„LLMæä¾›å•†)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tong-yong-da-mo-xing-si-wei-mo-shi-kuo-zhan-jin-xian-nei-zhi-de-llm-ti-gong-shang"><span class="nav-number">1.3.14.</span> <span class="nav-text">é€šç”¨å¤§æ¨¡å‹æ€ç»´æ¨¡å¼æ‰©å±• ğŸ§  (ä»…é™å†…ç½®çš„LLMæä¾›å•†)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#package-zhi-chi"><span class="nav-number">1.3.15.</span> <span class="nav-text">Package æ”¯æŒ</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Riceball LEE"
      src="https://www.gravatar.com/avatar/f7b81e783188e376c9f046ae1285d47f">
  <p class="site-author-name" itemprop="name">Riceball LEE</p>
  <div class="site-description" itemprop="description">Go with wind.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">124</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/snowyu" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;snowyu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 2014 â€“ 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"><a href='https://riceball.me'>Riceball LEE</a></span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹æ€»å­—æ•°ï¼š</span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">325k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">ç«™ç‚¹é˜…è¯»æ—¶é•¿ &asymp;</span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">9:52</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













  

  



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqusjs.css">

<script>
NexT.utils.loadComments(() => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/disqusjs@1/dist/disqus.js', () => {
    window.dsqjs = new DisqusJS({
      api: 'https://disqus.skk.moe/disqus/' || 'https://disqus.com/api/',
      apikey: 'vKNCqeYtqtmJXR3JG1Hi7Wn3Evwpq57HGsdO0JNH1bJNMAVeAiRKRkHw53qGXlUl',
      shortname: 'riceballl',
      url: "https://riceball.me/article/Build-an-application-oriented-AI-framework-from-scratch/",
      identifier: "article/Build-an-application-oriented-AI-framework-from-scratch/",
      title: "ä»å¤´æ‰‹æ“é¢å‘åº”ç”¨çš„AIæ¡†æ¶",
    });
  }, window.DisqusJS);
});
</script>



<script >
if (document.querySelectorAll('pre code.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme: 'forest',
      logLevel: 3,
      flowchart: { curve: 'linear' },
      gantt: { axisFormat: '%m/%d/%Y' },
      sequence: { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
